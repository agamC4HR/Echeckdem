@model Echeckdem.CustomFolder.CombinedOrganisationSetupViewModel

<div class="row">
    <!-- Organization List Section -->
    <div class="col-md-6">
        <h3>Organizations</h3>
        <input type="text" id="searchBar" placeholder="Search..." class="form-control mb-3" onkeyup="filterTable()">

        <table class="table">
            <thead>
                <tr>
                    <th>#</th>
                    <th>Organisation Name</th>
                </tr>
            </thead>
            <tbody>
                @if (Model.OrganisationsList?.Any() ?? false)
                {
                    int index = 1;
                    foreach (var org in Model.OrganisationsList)
                    {
                        <tr>
                            <td>@index++</td>
                            <td>
                                <a asp-action="OrganisationSetup" asp-route-selectedOid="@org.oid" class="org-link">
                                    @org.Oname
                                </a>
                            </td>
                        </tr>
                    }
                }
                else
                {
                    <tr>
                        <td colspan="2">No organizations found.</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>

    <!-- Selected Organisation Details Section -->
    <div class="col-md-6">
        @if (Model.SelectedOrganisation != null)
        {
            <div class="card">
                <div class="card-header">
                    <h3>Organisation Details</h3>
                </div>
                <div class="card-body">
                    <p><strong>OID:</strong> @Model.SelectedOrganisation.oid</p>
                    <p><strong>Name:</strong> @Model.SelectedOrganisation.Oname</p>
                    <p><strong>SPOC:</strong> @Model.SelectedOrganisation.Spoc</p>
                    <p><strong>Start Year:</strong> @Model.SelectedOrganisation.styear</p>
                    <p><strong>Contact Name:</strong> @Model.SelectedOrganisation.Contname</p>
                    <p><strong>Contact Email:</strong> @Model.SelectedOrganisation.Contemail</p>
                </div>
            </div>
        }
        else
        {
            <p>Select an organization to view details.</p>
        }
    </div>
</div>

<script>
    // Search Table Functionality
    function filterTable() {
        const input = document.getElementById('searchBar');
        const filter = input.value.toLowerCase();
        const rows = document.querySelectorAll('table tbody tr');

        rows.forEach(row => {
            const text = row.innerText.toLowerCase();
            row.style.display = text.includes(filter) ? '' : 'none';
        });
    }
</script>
